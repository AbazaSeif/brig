

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Frequently Asked Questions &mdash; brig v0.1.0-beta documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Comparison with other tools" href="comparison.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> brig
          

          
          </a>

          
            
            
              <div class="version">
                v0.1.0-beta
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User documentation:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general-questions">General questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#why-is-the-software-named-brig">1. Why is the software named <code class="docutils literal notranslate"><span class="pre">brig</span></code>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#who-develops-it">2. Who develops it?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#technical-questions">Technical questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-is-the-encryption-working">1. How is the encryption working?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#is-there-compression-implemented">2. Is there compression implemented?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-hash-algorithms-are-used">3. What hash algorithms are used?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-kind-of-deduplication-is-currently-used">4. What kind of deduplication is currently used?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-fast-is-the-i-o-when-using-brig">5. How fast is the I/O when using <code class="docutils literal notranslate"><span class="pre">brig</span></code>?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Complementary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="comparison.html">Comparison with other tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">How to contribute</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">brig</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Frequently Asked Questions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/faq.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">Â¶</a></h1>
<div class="section" id="general-questions">
<h2>General questions<a class="headerlink" href="#general-questions" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="why-is-the-software-named-brig">
<h3>1. Why is the software named <code class="docutils literal notranslate"><span class="pre">brig</span></code>?<a class="headerlink" href="#why-is-the-software-named-brig" title="Permalink to this headline">Â¶</a></h3>
<p>It is named after the ship with the same name.
When we named it, we thought itâ€™s a good name for the following reason:</p>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">brig</span></code> is a very lightweight and fast ship.</li>
<li>It was commonly used to transport small amount of goods.</li>
<li>A ship operates on streams (sorry ðŸ˜›)</li>
<li>The name is short and somewhat similar to <code class="docutils literal notranslate"><span class="pre">git</span></code>.</li>
<li>It gives you a few nautical metaphors and a logo for free.</li>
</ul>
<p>Truth be told, only half of the two name givers thought itâ€™s a good name, but
I still kinda like it.</p>
</div>
<div class="section" id="who-develops-it">
<h3>2. Who develops it?<a class="headerlink" href="#who-develops-it" title="Permalink to this headline">Â¶</a></h3>
<p>Although this documentation sometimes speaks of Â»weÂ«, the only developer is
currently <a class="reference external" href="https://github.com/sahib">Chris Pahl</a>. He writes it entirely in
his free time, mostly during commuting with the train.</p>
</div>
</div>
<div class="section" id="technical-questions">
<h2>Technical questions<a class="headerlink" href="#technical-questions" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="how-is-the-encryption-working">
<h3>1. How is the encryption working?<a class="headerlink" href="#how-is-the-encryption-working" title="Permalink to this headline">Â¶</a></h3>
<p>A stream is chunked into equal sized blocks that are encrypted in GCM mode
using AES-256. Additionally ChaCha20 (with Poly1305) is currently supported but
it might be removed soon. The overall file format is somewhat similar to NaCL
secretboxes, but it is more tailored to supporting efficient seeking.</p>
<p>The current default is <code class="docutils literal notranslate"><span class="pre">ChaCha20</span></code>, although machines with the <code class="docutils literal notranslate"><span class="pre">aes-ni</span></code>
instruction set might yield significant higher throughput. The source of the
<a class="reference external" href="https://github.com/sahib/brig/tree/master/catfs/mio/encrypt">encryption layer can be found here</a>.
Hereâ€™s a basic overview over the format:</p>
<a class="reference internal image-reference" href="_images/format-encryption.svg"><div align="center" class="align-center"><img alt="_images/format-encryption.svg" src="_images/format-encryption.svg" width="66%" /></div>
</a>
<p>The key of each file is currently being derived from the content hash of the
file (See also <a class="reference external" href="https://en.wikipedia.org/wiki/Convergent_encryption">Convergent Encryption</a>). If the content
changes later, the key does not change since the key is only generated once
during the first staging of the file.</p>
<p>Please refer to the implementation for all implementation details for now. No
security audits of the implementation have been done yet, therefore Iâ€™d
appreciate every pair of eyes. Especially while everything is still in flux and
wonâ€™t harm any users.</p>
</div>
<div class="section" id="is-there-compression-implemented">
<h3>2. Is there compression implemented?<a class="headerlink" href="#is-there-compression-implemented" title="Permalink to this headline">Â¶</a></h3>
<p>Yes. The compression is being done before encryption and is only enabled if the
file looks compression-worthy. The Â»worthinessÂ« is determined by looking at its
header to guess a mime-type. Depending on the mime-type either <code class="docutils literal notranslate"><span class="pre">snappy</span></code> or
<code class="docutils literal notranslate"><span class="pre">lz4</span></code> is selected or no compression is added at all.</p>
<p>The source of the <a class="reference external" href="https://github.com/sahib/brig/tree/master/catfs/mio/compress">compression layer can be found here</a>. Hereâ€™s
a basic overview over the format:</p>
<a class="reference internal image-reference" href="_images/format-compression.svg"><div align="center" class="align-center"><img alt="_images/format-compression.svg" src="_images/format-compression.svg" width="66%" /></div>
</a>
</div>
<div class="section" id="what-hash-algorithms-are-used">
<h3>3. What hash algorithms are used?<a class="headerlink" href="#what-hash-algorithms-are-used" title="Permalink to this headline">Â¶</a></h3>
<p>Two algorithms are used:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">SHA256</span></code> is used by <code class="docutils literal notranslate"><span class="pre">IPFS</span></code> for every backend hash.</li>
<li><code class="docutils literal notranslate"><span class="pre">SHA3-256</span></code> is used as general purpose hash for everything <code class="docutils literal notranslate"><span class="pre">brig</span></code> internal
(Content and Tree hash).</li>
</ul>
<p>Each hash is encoded as <a class="reference external" href="https://github.com/multiformats/multihash">multihash</a>. For output purposes this
representation is encoded additionally in <code class="docutils literal notranslate"><span class="pre">base58</span></code>. Therefore, all hashes
that start with <code class="docutils literal notranslate"><span class="pre">W1</span></code> are <code class="docutils literal notranslate"><span class="pre">sha3-256</span></code> hashes while the ones starting with
<code class="docutils literal notranslate"><span class="pre">Qm</span></code> are <code class="docutils literal notranslate"><span class="pre">sha256</span></code> hashes. Keep in mind that <code class="docutils literal notranslate"><span class="pre">base58</span></code> is case-sensitive.</p>
</div>
<div class="section" id="what-kind-of-deduplication-is-currently-used">
<h3>4. What kind of deduplication is currently used?<a class="headerlink" href="#what-kind-of-deduplication-is-currently-used" title="Permalink to this headline">Â¶</a></h3>
<p>It is currently only possible to deduplicate between individual versions of a file.
And there also only the portion before the modification.</p>
<p><code class="docutils literal notranslate"><span class="pre">IPFS</span></code> implements deduplication, but it is circumvented by encrypting blocks
before giving them over to the backend. Implementing a more proper and informed
deduplication is one of the long term goals, which require more thorough
interaction with <code class="docutils literal notranslate"><span class="pre">IPFS</span></code>. It is also possible to do some basic deduplication
purely on <code class="docutils literal notranslate"><span class="pre">brig</span></code> side since we have more info on the file than <code class="docutils literal notranslate"><span class="pre">IPFS</span></code> has.</p>
</div>
<div class="section" id="how-fast-is-the-i-o-when-using-brig">
<h3>5. How fast is the I/O when using <code class="docutils literal notranslate"><span class="pre">brig</span></code>?<a class="headerlink" href="#how-fast-is-the-i-o-when-using-brig" title="Permalink to this headline">Â¶</a></h3>
<p>Here are some rather outdated graphs where you can get a rough feeling how fast
it can be. There are a few rules of thumb with mostly obvious content:</p>
<ul class="simple">
<li>It it goes over the network, itâ€™s the network speed plus a smaller constant overhead.</li>
<li>If it comes over FUSE, it is quite a bit slower than over <code class="docutils literal notranslate"><span class="pre">brig</span> <span class="pre">cat</span></code>.</li>
<li>If you do not use compression, writing and reading will be faster.</li>
</ul>
<p>The graphs below only measure in-memory performance compared to a <code class="docutils literal notranslate"><span class="pre">dd</span></code> like
speed (see the Â»baselineÂ« line).</p>
<a class="reference internal image-reference" href="_images/movie_read.svg"><img alt="_images/movie_read.svg" src="_images/movie_read.svg" width="66%" /></a>
<a class="reference internal image-reference" href="_images/movie_write.svg"><img alt="_images/movie_write.svg" src="_images/movie_write.svg" width="66%" /></a>
<p>Your mileage may vary and you better do your own benchmarks for now.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Explain/Update those graphs.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="comparison.html" class="btn btn-neutral float-right" title="Comparison with other tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral" title="Quickstart" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Chris Pahl.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v0.1.0-beta',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>